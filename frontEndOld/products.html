<!DOCTYPE html>
<html lang="de">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Product List</title>
</head>
<body>
<div id="main">
    <div id="products">
        <h2>Products</h2>
        <ul>

        </ul>
    </div>
</div>
</body>
</html>
<script>
    window.onload = () => {
        fetch('http://localhost:8081/product/products', {
            headers: {
                "Access-Control-Allow-Origin": "*"
            }
        })
            .then(result => result.json())
            .then((products) => {
                const ul = document.createElement('ul');
                const productsContainer = document.getElementById('products');
                products.forEach(function (product) {
                    let li = document.createElement('li');
                    li.appendChild(document.createTextNode(product.name));
                    let img = document.createElement('img');
                    img.src = 'cart.png';
                    img.style = "width: 16px";
                    li.onclick = () => {
                        placeOrder(product)
                    };
                    li.appendChild(img);
                    ul.appendChild(li);
                })
                productsContainer.appendChild(ul);
            })
    }

    function placeOrder(product) {
        const order = {
            "user_id": 1,
            "product_id": product.id,
            "orderTime": new Date().toISOString().slice(0, 19)
        };
        console.log(order)
        fetch('http://localhost:8083/order/orders', {
            method: 'POST',
            mode: 'cors',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(order)
        })
    }
</script>
<style>
    #main {
        width: 100%;
        display: flex;
    }

    #main > div {
        width: 50%;
    }
</style>